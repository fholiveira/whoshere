#!/bin/bash

source whoshere.d/globals

function send_ping_scan {
  sudo arp-scan --localnet --quiet \
    | grep ^[0-9]\.[0-9]\.[0-9]\.[0-9].* \
    | awk '{ print $2"\t"$1; }'
}

function scan_network {
  send_ping_scan > $temp_path
  send_ping_scan >> $temp_path
  send_ping_scan >> $temp_path

  cat $temp_path \
    | sort --unique \
    | join $index_path -
}

function show_verbose {
  scan_network \
    | awk '{ print $2" is online at "$3; }' \
    | sort --unique
}

function show {
  scan_network \
    | cut --fields=2 --delimiter=' ' \
    | sort --unique
}
